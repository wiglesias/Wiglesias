---
- hosts: s6
  gather_facts: false
  vars_files:
    - "{{ playbook_dir }}/vars/config.yml"
  tasks:
    - name: copy local uploads directory to remote
      synchronize:
        mode: push
        recursive: yes
        perms: yes
        times: yes
        dest: "{{ vhost_path }}/shared/web/uploads"
        src: "{{ playbook_dir }}/../../web"
    - name: fix ownership in downloaded files locally
      delegate_to: mother
      file:
        path: "{{ vhost_path }}/shared/web/uploads"
        recurse: yes
        follow: yes
        owner: www-data
        group: www-data
